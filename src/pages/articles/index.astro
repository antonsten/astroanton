---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// Get all articles from the content collection
const articles = await getCollection('articles');

// Sort articles by publish date
const sortedPosts = articles
    .map(article => ({
        ...article.data,
        url: `/articles/${article.slug}`
    }))
    .sort((a, b) => {
        // If either article has no date, put it at the end
        if (!a.date) return 1;
        if (!b.date) return -1;
        return new Date(b.date).getTime() - new Date(a.date).getTime();
    });
---

<Layout title="Articles | Anton Sten" description="Articles and thoughts on UX design, product strategy, and digital experiences.">
    <div class="px-5 pt-32">
        <div class="max-w-[700px] mx-auto">
            <header class="mb-16">
                <h1 class="text-[32px] md:text-[50px] leading-[40px] md:leading-[56px] tracking-[-0.02em] font-medium text-black mb-4">Articles</h1>
                <p class="text-[20px] leading-[32px] tracking-[-0.01em] text-dark-grey">
                    Thoughts on UX design, product strategy, and digital experiences.
                </p>
            </header>
            
            <div class="space-y-16">
                {sortedPosts.length === 0 ? (
                    <p class="text-[18px] leading-[28px] tracking-[-0.01em] text-dark-grey">
                        No articles found.
                    </p>
                ) : (
                    sortedPosts.map(post => {
                        const formattedDate = post.date ? new Date(post.date).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        }) : null;
                        
                        return (
                            <article class="group">
                                <a href={post.url} class="block space-y-4">
                                    <div class="space-y-2">
                                        <h2 class="text-[26px] leading-[34px] tracking-[-0.01em] font-medium text-black group-hover:text-green transition-colors">
                                            {post.title}
                                        </h2>
                                        <div class="flex items-center gap-2 text-dark-grey text-[14px] leading-[20px] tracking-[-0.01em]">
                                            {formattedDate && (
                                                <>
                                                    <time datetime={post.date}>{formattedDate}</time>
                                                    {post.readingTime && <span>â€¢</span>}
                                                </>
                                            )}
                                            {post.readingTime && (
                                                <span>{post.readingTime}</span>
                                            )}
                                        </div>
                                    </div>
                                </a>
                            </article>
                        );
                    })
                )}
            </div>
        </div>
    </div>
</Layout> 